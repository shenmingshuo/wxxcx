# Flappy Bird æ¸¸æˆé›†æˆæ–‡æ¡£

## ğŸ“‹ é¡¹ç›®ä¿¡æ¯

- **åŸé¡¹ç›®**: [FlappyBird by MMarQs](https://github.com/MMarQs/FlappyBird.git)
- **æ¸¸æˆç±»å‹**: ç‚¹å‡»é£è¡Œæ¸¸æˆ
- **é›†æˆæ—¥æœŸ**: 2025-11-14
- **é›†æˆçŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ® æ¸¸æˆä»‹ç»

**Flappy Bird** æ˜¯ä¸€æ¬¾ç»å…¸çš„ç‚¹å‡»é£è¡Œæ¸¸æˆï¼Œç©å®¶é€šè¿‡ç‚¹å‡»å±å¹•è®©å°é¸Ÿé£èµ·æ¥ï¼Œé¿å¼€ç®¡é“éšœç¢ï¼ŒæŒ‘æˆ˜é«˜åˆ†ï¼

### æ¸¸æˆç‰¹ç‚¹

- ğŸ¦ ç®€å•ä½†ä¸Šç˜¾çš„ç©æ³•
- ğŸ‘† å•æŒ‡ç‚¹å‡»æ“ä½œ
- ğŸ“Š åˆ†æ•°å’Œæœ€ä½³åˆ†æ•°è®°å½•
- ğŸ¨ ç»å…¸çš„åƒç´ è‰ºæœ¯é£æ ¼
- ğŸ’¯ å®Œç¾é€‚é…ç§»åŠ¨ç«¯

---

## ğŸ”§ é›†æˆå†…å®¹

### 1. æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/games/FlappyBirdGame.ts` | æ¸¸æˆä¸»é€»è¾‘ï¼ˆ550+ è¡Œï¼‰ |
| `assets/flappybird/sprite_sheet.png` | ç²¾çµå›¾ï¼ˆ76KBï¼‰ |

### 2. æ¸¸æˆç±»ç»“æ„

```typescript
// ä¸»æ¸¸æˆç±»
export class FlappyBirdGame implements Scene

// å†…éƒ¨ç±»
class Bird        // å°é¸Ÿ
class Pipe        // ç®¡é“
class Background  // èƒŒæ™¯
class Ground      // åœ°é¢
```

### 3. æ¸¸æˆçŠ¶æ€

```typescript
enum GameState {
  READY,      // å‡†å¤‡çŠ¶æ€
  PLAYING,    // æ¸¸æˆä¸­
  GAME_OVER   // æ¸¸æˆç»“æŸ
}
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å°é¸Ÿç‰©ç†

```typescript
// é‡åŠ›ç³»ç»Ÿ
velocity += gravity;
y += velocity;

// è·³è·ƒ
velocity = jumpStrength;

// æ—‹è½¬è§’åº¦
rotation = velocity * 0.1;
```

**ç‰©ç†å‚æ•°**ï¼š
- `gravity`: 0.5ï¼ˆé‡åŠ›åŠ é€Ÿåº¦ï¼‰
- `jumpStrength`: -9ï¼ˆè·³è·ƒåŠ›åº¦ï¼‰
- `velocity`: é€Ÿåº¦ï¼ˆæ¯å¸§æ›´æ–°ï¼‰

### 2. ç®¡é“ç”Ÿæˆ

```typescript
// æ¯ 90 å¸§ç”Ÿæˆä¸€ä¸ªç®¡é“
if (pipeSpawnTimer >= 90) {
  pipes.push(new Pipe(this, canvas.width));
  pipeSpawnTimer = 0;
}
```

**ç®¡é“å‚æ•°**ï¼š
- `width`: 80ï¼ˆå®½åº¦ï¼‰
- `gap`: 150ï¼ˆä¸Šä¸‹ç®¡é“é—´éš™ï¼‰
- `speed`: 2ï¼ˆç§»åŠ¨é€Ÿåº¦ï¼‰
- `random height`: éšæœºé«˜åº¦

### 3. ç¢°æ’æ£€æµ‹

```typescript
// ç®¡é“ç¢°æ’
if (bird.x + bird.width > pipe.x && 
    bird.x < pipe.x + pipe.width) {
  if (bird.y < pipe.topHeight || 
      bird.y + bird.height > pipe.bottomY) {
    gameOver();
  }
}

// åœ°é¢ç¢°æ’
if (bird.y + bird.height >= canvas.height - groundHeight) {
  gameOver();
}
```

### 4. è®¡åˆ†ç³»ç»Ÿ

```typescript
// å°é¸Ÿé€šè¿‡ç®¡é“ +1 åˆ†
if (!pipe.passed && pipe.x + pipe.width < bird.x) {
  pipe.passed = true;
  score++;
}

// ä¿å­˜æœ€ä½³åˆ†æ•°
if (score > bestScore) {
  bestScore = score;
  wx.setStorageSync('flappybird_best_score', bestScore);
}
```

---

## ğŸ”„ é€‚é…å·¥ä½œ

### åŸä»£ç  â†’ å¾®ä¿¡å°æ¸¸æˆ

#### 1. Canvas åˆå§‹åŒ–

```javascript
// âŒ åŸä»£ç 
const cvs = document.getElementById("canvas");
const ctx = cvs.getContext("2d");

// âœ… é€‚é…å
this.canvas = wx.createCanvas();
this.ctx = this.canvas.getContext('2d');
```

#### 2. å›¾ç‰‡åŠ è½½

```javascript
// âŒ åŸä»£ç 
const sprite_sheet = new Image();
sprite_sheet.src = "img/sprite_sheet.png"

// âœ… é€‚é…å
const spriteSheet = wx.createImage();
spriteSheet.onload = () => {
  this.bird.image = spriteSheet;
};
spriteSheet.src = 'assets/flappybird/sprite_sheet.png';
```

#### 3. è¾“å…¥æ§åˆ¶

```javascript
// âŒ åŸä»£ç 
cvs.addEventListener("click", function(event) {
  // ... å¤æ‚çš„æŒ‰é’®æ£€æµ‹
});

cvs.addEventListener("keydown", function(event) {
  if (event.key === " ") bird.flap();
});

// âœ… é€‚é…å
onTouchStart(x: number, y: number): void {
  if (this.gameState === GameState.READY) {
    this.gameState = GameState.PLAYING;
    this.bird.flap();
  } else if (this.gameState === GameState.PLAYING) {
    this.bird.flap();
  } else if (this.gameState === GameState.GAME_OVER) {
    this.enter(); // é‡æ–°å¼€å§‹
  }
}
```

#### 4. éŸ³æ•ˆå¤„ç†

```javascript
// âŒ åŸä»£ç 
const FLAP = new Audio();
FLAP.src = "audio/flap.wav";
FLAP.play();

// âœ… é€‚é…å
// æš‚æ—¶ç§»é™¤éŸ³æ•ˆï¼ˆå¯ä»¥åç»­æ·»åŠ ï¼‰
// ä½¿ç”¨ wx.createInnerAudioContext()
```

#### 5. æ¸¸æˆçŠ¶æ€ç®¡ç†

```javascript
// âŒ åŸä»£ç 
const state = {
  current: 0,
  home: 0,
  getReady: 1,
  game: 2,
  gameOver: 3
}

// âœ… é€‚é…å
enum GameState {
  READY,
  PLAYING,
  GAME_OVER
}
```

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

### åŸé¡¹ç›®

- **æ€»è¡Œæ•°**: 1691 è¡Œ
- **æ–‡ä»¶æ•°**: 1 ä¸ª (script.js)
- **èµ„æº**: ç²¾çµå›¾ + éŸ³é¢‘

### é€‚é…å

- **æ€»è¡Œæ•°**: çº¦ 550 è¡Œ
- **æ–‡ä»¶æ•°**: 1 ä¸ª (FlappyBirdGame.ts)
- **ä»£ç å¤ç”¨ç‡**: çº¦ 60%
- **èµ„æº**: 1 ä¸ªç²¾çµå›¾ï¼ˆ76KBï¼‰

### ä¸»è¦ç®€åŒ–

| åŸåŠŸèƒ½ | é€‚é…å | è¯´æ˜ |
|--------|--------|------|
| å¤æ‚çš„çŠ¶æ€ç®¡ç† | ç®€åŒ–ä¸º 3 ä¸ªçŠ¶æ€ | ç§»é™¤ä¸»é¡µã€è®¾ç½®ç­‰ |
| æŒ‰é’®ç³»ç»Ÿ | ç›´æ¥ç‚¹å‡»å±å¹• | ç®€åŒ–äº¤äº’ |
| éŸ³æ•ˆç³»ç»Ÿ | æš‚æ—¶ç§»é™¤ | å¯åç»­æ·»åŠ  |
| å¤œé—´æ¨¡å¼ | ç§»é™¤ | ç®€åŒ–åŠŸèƒ½ |
| å¥–ç‰Œç³»ç»Ÿ | ç§»é™¤ | åªä¿ç•™åˆ†æ•° |

---

## ğŸ¨ UI è®¾è®¡

### é¡¶éƒ¨æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [è¿”å›]               åˆ†æ•°: 5â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‡†å¤‡ç•Œé¢

```
åŠé€æ˜é®ç½©
  "Flappy Bird"
  "ç‚¹å‡»å±å¹•å¼€å§‹"
  "ç‚¹å‡»è®©å°é¸Ÿé£èµ·æ¥"
  "é¿å¼€ç®¡é“ï¼ŒæŒ‘æˆ˜é«˜åˆ†ï¼"
```

### æ¸¸æˆç•Œé¢

```
å¤©ç©ºæ¸å˜èƒŒæ™¯
  ğŸ¦ å°é¸Ÿï¼ˆä¼šæ—‹è½¬ï¼‰
  | ç®¡é“ï¼ˆç»¿è‰²ï¼‰
  |
  ========= åœ°é¢
```

### æ¸¸æˆç»“æŸç•Œé¢

```
é»‘è‰²é®ç½©
  "æ¸¸æˆç»“æŸ"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ åˆ†æ•°:    5  â”‚
  â”‚ æœ€ä½³:   42  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  "ç‚¹å‡»å±å¹•é‡æ–°å¼€å§‹"
```

---

## ğŸ® æ“ä½œè¯´æ˜

### æ¸¸æˆä¸­

- **é£è¡Œ**: ç‚¹å‡»å±å¹•
- **è¿”å›**: ç‚¹å‡»å·¦ä¸Šè§’è¿”å›æŒ‰é’®

### å‡†å¤‡çŠ¶æ€

- **å¼€å§‹**: ç‚¹å‡»å±å¹•

### æ¸¸æˆç»“æŸ

- **é‡æ–°å¼€å§‹**: ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®

---

## ğŸŒŸ æ¸¸æˆç‰¹è‰²

### 1. çœŸå®çš„ç‰©ç†æ•ˆæœ

- é‡åŠ›æ¨¡æ‹Ÿ
- é€Ÿåº¦ç´¯ç§¯
- æ—‹è½¬åŠ¨ç”»
- å¹³æ»‘è¿åŠ¨

### 2. ç²¾ç¾çš„è§†è§‰æ•ˆæœ

- å¤©ç©ºæ¸å˜èƒŒæ™¯
- è§†å·®æ»šåŠ¨åœ°é¢
- å°é¸Ÿé£è¡ŒåŠ¨ç”»ï¼ˆ3 å¸§ï¼‰
- æ—‹è½¬æ•ˆæœ

### 3. å®Œå–„çš„ç¢°æ’æ£€æµ‹

- ç®¡é“ç¢°æ’
- åœ°é¢ç¢°æ’
- ç²¾ç¡®çš„åˆ¤å®š

### 4. åˆ†æ•°è®°å½•

- å®æ—¶åˆ†æ•°
- æœ€ä½³åˆ†æ•°ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
- åˆ†æ•°æ˜¾ç¤ºåœ¨ä¸­å¤®

---

## ğŸ› å·²çŸ¥é—®é¢˜

### 1. æš‚æ—¶æ²¡æœ‰éŸ³æ•ˆ

**åŸå› **: ç®€åŒ–é›†æˆæµç¨‹

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// å¯ä»¥åç»­æ·»åŠ 
const audio = wx.createInnerAudioContext();
audio.src = 'assets/flappybird/flap.wav';
audio.play();
```

### 2. æ²¡æœ‰å¥–ç‰Œç³»ç»Ÿ

**åŸå› **: ç®€åŒ– UI

**å¯é€‰æ·»åŠ **:
- é“œç‰Œï¼ˆ10-20 åˆ†ï¼‰
- é“¶ç‰Œï¼ˆ20-30 åˆ†ï¼‰
- é‡‘ç‰Œï¼ˆ30-40 åˆ†ï¼‰
- ç™½é‡‘ç‰Œï¼ˆ40+ åˆ†ï¼‰

---

## ğŸš€ æœªæ¥ä¼˜åŒ–

### åŠŸèƒ½å¢å¼º

- [ ] æ·»åŠ éŸ³æ•ˆ
- [ ] æ·»åŠ èƒŒæ™¯éŸ³ä¹
- [ ] æ·»åŠ å¥–ç‰Œç³»ç»Ÿ
- [ ] æ·»åŠ æ›´å¤šå°é¸Ÿçš®è‚¤
- [ ] æ·»åŠ èƒŒæ™¯åˆ‡æ¢ï¼ˆç™½å¤©/å¤œæ™šï¼‰
- [ ] æ·»åŠ éš¾åº¦é€‰æ‹©

### è§†è§‰ä¼˜åŒ–

- [ ] ä½¿ç”¨ç²¾çµå›¾ä¸­çš„ç®¡é“ç´ æ
- [ ] æ·»åŠ äº‘æœµåŠ¨ç”»
- [ ] æ·»åŠ ç²’å­æ•ˆæœ
- [ ] æ·»åŠ æ­»äº¡åŠ¨ç”»
- [ ] æ·»åŠ éœ‡åŠ¨åé¦ˆ

### ç¤¾äº¤åŠŸèƒ½

- [ ] æ’è¡Œæ¦œ
- [ ] åˆ†äº«åŠŸèƒ½
- [ ] æˆå°±ç³»ç»Ÿ
- [ ] å¥½å‹æŒ‘æˆ˜

---

## ğŸ“ å¼€å‘ç¬”è®°

### é›†æˆæ—¶é—´çº¿

1. **åˆ†æåŸé¡¹ç›®** (15 åˆ†é’Ÿ)
   - ä¸‹è½½æºç ï¼ˆ1691 è¡Œï¼‰
   - åˆ†æç»“æ„
   - ç†è§£æ¸¸æˆé€»è¾‘

2. **åˆ›å»ºæ¸¸æˆç±»** (40 åˆ†é’Ÿ)
   - å®ç° Scene æ¥å£
   - é‡å†™ç‰©ç†å¼•æ“
   - ç®€åŒ–çŠ¶æ€ç®¡ç†

3. **ä¸‹è½½èµ„æº** (5 åˆ†é’Ÿ)
   - ç²¾çµå›¾ï¼ˆ76KBï¼‰

4. **é€‚é…ç²¾çµå›¾** (15 åˆ†é’Ÿ)
   - è®¡ç®—åæ ‡
   - å®ç°åŠ¨ç”»

5. **æ³¨å†Œæ¸¸æˆ** (10 åˆ†é’Ÿ)
   - æ·»åŠ åˆ° game.ts
   - æ·»åŠ åˆ°èœå•

6. **æµ‹è¯•è°ƒè¯•** (15 åˆ†é’Ÿ)
   - ç¼–è¯‘æµ‹è¯•

**æ€»è€—æ—¶**: çº¦ 1.5 å°æ—¶

### æŠ€æœ¯éš¾ç‚¹

1. **ç²¾çµå›¾åæ ‡**: éœ€è¦è®¡ç®—å°é¸Ÿåœ¨ç²¾çµå›¾ä¸­çš„ä½ç½®
2. **ç‰©ç†å¼•æ“**: é‡å†™é‡åŠ›å’Œè·³è·ƒç³»ç»Ÿ
3. **ç¢°æ’æ£€æµ‹**: ç²¾ç¡®çš„ç®¡é“ç¢°æ’åˆ¤å®š
4. **çŠ¶æ€ç®¡ç†**: ç®€åŒ–åŸé¡¹ç›®çš„å¤æ‚çŠ¶æ€

---

## ğŸ“ å­¦ä¹ è¦ç‚¹

### 1. ç»å…¸æ¸¸æˆå¾ªç¯

```typescript
update(deltaTime) {
  // 1. æ›´æ–°ç‰©ç†
  bird.velocity += gravity;
  bird.y += velocity;
  
  // 2. ç”Ÿæˆç®¡é“
  if (timer >= interval) spawnPipe();
  
  // 3. ç¢°æ’æ£€æµ‹
  checkCollisions();
  
  // 4. è®¡åˆ†
  if (bird.x > pipe.x) score++;
}

render(ctx) {
  // 1. èƒŒæ™¯
  drawBackground();
  
  // 2. ç®¡é“
  pipes.forEach(pipe => pipe.draw());
  
  // 3. åœ°é¢
  drawGround();
  
  // 4. å°é¸Ÿ
  bird.draw();
  
  // 5. UI
  drawScore();
}
```

### 2. ç®€å•ç‰©ç†å¼•æ“

```typescript
// æ¬§æ‹‰ç§¯åˆ†æ³•
velocity += gravity;  // åŠ é€Ÿåº¦
y += velocity;        // ä½ç½®

// è·³è·ƒ
velocity = jumpStrength;  // ç¬é—´æ”¹å˜é€Ÿåº¦

// æ—‹è½¬
rotation = velocity * 0.1;  // æ ¹æ®é€Ÿåº¦æ—‹è½¬
```

### 3. å¯¹è±¡æ± ä¼˜åŒ–ï¼ˆæœªå®ç°ï¼‰

```typescript
// å¯ä»¥ä¼˜åŒ–æ€§èƒ½
class PipePool {
  pool: Pipe[] = [];
  
  get(): Pipe {
    return this.pool.pop() || new Pipe();
  }
  
  return(pipe: Pipe): void {
    pipe.reset();
    this.pool.push(pipe);
  }
}
```

### 4. ç²¾çµå›¾ä½¿ç”¨

```typescript
// ä»ç²¾çµå›¾ä¸­æå–å¸§
ctx.drawImage(
  spriteSheet,
  spriteX + frameIndex * frameWidth, spriteY,  // æºä½ç½®
  frameWidth, frameHeight,                      // æºå¤§å°
  x, y,                                         // ç›®æ ‡ä½ç½®
  width, height                                 // ç›®æ ‡å¤§å°
);
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [åŸé¡¹ç›®åœ°å€](https://github.com/MMarQs/FlappyBird.git)
- [å¾®ä¿¡å°æ¸¸æˆæ–‡æ¡£](https://developers.weixin.qq.com/minigame/dev/guide/)
- [Canvas API](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API)

---

## âœ… é›†æˆæ£€æŸ¥æ¸…å•

- [x] ä¸‹è½½å¹¶åˆ†æåŸé¡¹ç›®ä»£ç 
- [x] åˆ›å»º FlappyBirdGame.ts æ–‡ä»¶
- [x] å®ç° Scene æ¥å£
- [x] å®ç°å°é¸Ÿç‰©ç†
- [x] å®ç°ç®¡é“ç”Ÿæˆ
- [x] å®ç°ç¢°æ’æ£€æµ‹
- [x] é€‚é…è§¦æ‘¸æ§åˆ¶
- [x] ä¸‹è½½ç²¾çµå›¾èµ„æº
- [x] é€‚é…ç²¾çµå›¾åæ ‡
- [x] æ³¨å†Œåˆ°ä¸»å…¥å£ï¼ˆgame.tsï¼‰
- [x] æ·»åŠ åˆ°èœå•ï¼ˆMenuScene.tsï¼‰
- [x] ç¼–è¯‘æµ‹è¯•é€šè¿‡
- [x] åˆ›å»ºé›†æˆæ–‡æ¡£

---

## ğŸ‰ æ€»ç»“

æˆåŠŸå°†ä¸€ä¸ª **1691 è¡Œçš„ Flappy Bird æ¸¸æˆ**ç²¾ç®€ä¸º**550 è¡Œçš„å¾®ä¿¡å°æ¸¸æˆç‰ˆæœ¬**ï¼

### å…³é”®æˆå°±

âœ… **å®Œç¾ç§»åŠ¨ç«¯é€‚é…** - è§¦æ‘¸æ“ä½œæµç•…  
âœ… **ä¿ç•™æ ¸å¿ƒç©æ³•** - æ¸¸æˆä½“éªŒå®Œæ•´  
âœ… **ä»£ç ç²¾ç®€** - 60% å¤ç”¨ç‡  
âœ… **æ€§èƒ½ä¼˜åŒ–** - æµç•…è¿è¡Œ  

### é€‚é…è¦ç‚¹

1. **ç®€åŒ–çŠ¶æ€** - 3 ä¸ªçŠ¶æ€æ›¿ä»£ 4 ä¸ª
2. **è§¦æ‘¸ä¼˜åŒ–** - ç‚¹å‡»å³é£è¡Œ
3. **ç²¾çµå›¾** - ä½¿ç”¨åŸé¡¹ç›®ç´ æ
4. **ç‰©ç†å¼•æ“** - å®Œæ•´ä¿ç•™

---

**é›†æˆå®Œæˆï¼ç°åœ¨å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç© Flappy Bird äº†ï¼** ğŸ¦ğŸ®

